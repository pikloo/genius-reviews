!function(t){"use strict";t(document).ready(function(){const a=t("#gr-load-more");let e=1;if(new URLSearchParams(window.location.search).get("gr-sort")){const a=t(".gr-bloc");a.length&&t("html, body").animate({scrollTop:a.offset().top-100},600)}t(document).on("click",".gr-badge",function(a){a.preventDefault();const e=t(".gr-bloc");e.length&&t("html, body").animate({scrollTop:e.offset().top-100},600)}),a.on("click",function(){e++;const o=t(".gr-tab.gr-tab-active").data("tab")||"products",n=t(`#gr-tab-${o} .gr-grid`),r=n.data("product-id")||0,i=parseInt(a.data("limit"))||12,s=parseInt(a.data("total-products"))||0,c=parseInt(a.data("total-shop"))||0,d="shop"===o?c:s,l=a.data("mode")||"";n.children().length>=d?a.fadeOut():t.post(GR_PUBLIC.ajax,{action:"load_reviews",nonce:GR_PUBLIC.nonce,product_id:r,page:e,limit:i,sort:t("#gr-sort").val(),mode:l},function(e){if(e.success){const o=t(e.data.html).css({opacity:0});n.append(o),o.each(function(a,e){t(e).delay(30*a).animate({opacity:1,top:0},200)});const r=o.first();r.length&&t("html, body").animate({scrollTop:r.offset().top-100},600),(n.children().length>=d||!e.data.has_more)&&a.fadeOut()}})}),t(document).on("click",".gr-tab",function(){const a=t(this),e=a.data("tab");t(".gr-tab").removeClass("gr-tab-active"),a.addClass("gr-tab-active"),t(".gr-tab-content").addClass("hidden"),t(`#gr-tab-${e}`).removeClass("hidden");const o=t("#gr-load-more"),n=(parseInt(o.data("limit")),parseInt(o.data("total-products"))||0),r=parseInt(o.data("total-shop"))||0,i="shop"===e?r:n;t(`#gr-tab-${e} .gr-grid`).children().length>=i?o.fadeOut():o.fadeIn()}),"undefined"!=typeof Splide&&t(".gr-splide").length&&t(".gr-splide").each(function(){const a=t(this),e=new Splide(a[0],{type:"loop",perPage:3,perMove:1,gap:"30px",arrows:!1,pagination:!1,autoplay:!0,interval:5e3,pauseOnHover:!0,breakpoints:{1024:{perPage:2},768:{perPage:1,gap:"20px"}}});e.mount(),a.find(".gr-splide-button-next").on("click",()=>e.go(">")),a.find(".gr-splide-button-prev").on("click",()=>e.go("<"))}),t(document).on("click",".gr-read-more",function(){const a=t(this),e=a.closest(".gr-excerpt").find(".gr-full-text");e.is(":visible")?(e.hide(),a.text("Voir plus")):(e.show(),a.text("Voir moins"))})})}(jQuery);